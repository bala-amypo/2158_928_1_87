#!/usr/bin/env python3
# This script was auto-generated to recreate the project structure and files.
import os

def create_file(path, content):
    # Ensure directory exists
    directory = os.path.dirname(path)
    if directory and not os.path.exists(directory):
        os.makedirs(directory)
    
    # Write content
    with open(path, 'w', encoding='utf-8') as f:
        f.write(content)
    print(f'Created: {path}')

def main():
    create_file(r'.gitattributes', '/mvnw text eol=lf\n*.cmd text eol=crlf\n')
    create_file(r'.gitignore', 'HELP.md\ntarget/\n.mvn/wrapper/maven-wrapper.jar\n!**/src/main/**/target/\n!**/src/test/**/target/\n\n### STS ###\n.apt_generated\n.classpath\n.factorypath\n.project\n.settings\n.springBeans\n.sts4-cache\n\n### IntelliJ IDEA ###\n.idea\n*.iws\n*.iml\n*.ipr\n\n### NetBeans ###\n/nbproject/private/\n/nbbuild/\n/dist/\n/nbdist/\n/.nb-gradle/\nbuild/\n!**/src/main/**/build/\n!**/src/test/**/build/\n\n### VS Code ###\n.vscode/\n')
    create_file(r'HELP.md', "# Getting Started\n\n### Reference Documentation\nFor further reference, please consider the following sections:\n\n* [Official Apache Maven documentation](https://maven.apache.org/guides/index.html)\n* [Spring Boot Maven Plugin Reference Guide](https://docs.spring.io/spring-boot/3.5.10-SNAPSHOT/maven-plugin)\n* [Create an OCI image](https://docs.spring.io/spring-boot/3.5.10-SNAPSHOT/maven-plugin/build-image.html)\n\n### Maven Parent overrides\n\nDue to Maven's design, elements are inherited from the parent POM to the project POM.\nWhile most of the inheritance is fine, it also inherits unwanted elements like `<license>` and `<developers>` from the parent.\nTo prevent this, the project POM contains empty overrides for these elements.\nIf you manually switch to a different parent and actually want the inheritance, you need to remove those overrides.\n\n")
    create_file(r'mvnw', '#!/bin/sh\n# ----------------------------------------------------------------------------\n# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# "License"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#    http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing,\n# software distributed under the License is distributed on an\n# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n# KIND, either express or implied.  See the License for the\n# specific language governing permissions and limitations\n# under the License.\n# ----------------------------------------------------------------------------\n\n# ----------------------------------------------------------------------------\n# Apache Maven Wrapper startup batch script, version 3.3.4\n#\n# Optional ENV vars\n# -----------------\n#   JAVA_HOME - location of a JDK home dir, required when download maven via java source\n#   MVNW_REPOURL - repo url base for downloading maven distribution\n#   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven\n#   MVNW_VERBOSE - true: enable verbose log; debug: trace the mvnw script; others: silence the output\n# ----------------------------------------------------------------------------\n\nset -euf\n[ "${MVNW_VERBOSE-}" != debug ] || set -x\n\n# OS specific support.\nnative_path() { printf %s\\\\n "$1"; }\ncase "$(uname)" in\nCYGWIN* | MINGW*)\n  [ -z "${JAVA_HOME-}" ] || JAVA_HOME="$(cygpath --unix "$JAVA_HOME")"\n  native_path() { cygpath --path --windows "$1"; }\n  ;;\nesac\n\n# set JAVACMD and JAVACCMD\nset_java_home() {\n  # For Cygwin and MinGW, ensure paths are in Unix format before anything is touched\n  if [ -n "${JAVA_HOME-}" ]; then\n    if [ -x "$JAVA_HOME/jre/sh/java" ]; then\n      # IBM\'s JDK on AIX uses strange locations for the executables\n      JAVACMD="$JAVA_HOME/jre/sh/java"\n      JAVACCMD="$JAVA_HOME/jre/sh/javac"\n    else\n      JAVACMD="$JAVA_HOME/bin/java"\n      JAVACCMD="$JAVA_HOME/bin/javac"\n\n      if [ ! -x "$JAVACMD" ] || [ ! -x "$JAVACCMD" ]; then\n        echo "The JAVA_HOME environment variable is not defined correctly, so mvnw cannot run." >&2\n        echo "JAVA_HOME is set to \\"$JAVA_HOME\\", but \\"\\$JAVA_HOME/bin/java\\" or \\"\\$JAVA_HOME/bin/javac\\" does not exist." >&2\n        return 1\n      fi\n    fi\n  else\n    JAVACMD="$(\n      \'set\' +e\n      \'unset\' -f command 2>/dev/null\n      \'command\' -v java\n    )" || :\n    JAVACCMD="$(\n      \'set\' +e\n      \'unset\' -f command 2>/dev/null\n      \'command\' -v javac\n    )" || :\n\n    if [ ! -x "${JAVACMD-}" ] || [ ! -x "${JAVACCMD-}" ]; then\n      echo "The java/javac command does not exist in PATH nor is JAVA_HOME set, so mvnw cannot run." >&2\n      return 1\n    fi\n  fi\n}\n\n# hash string like Java String::hashCode\nhash_string() {\n  str="${1:-}" h=0\n  while [ -n "$str" ]; do\n    char="${str%"${str#?}"}"\n    h=$(((h * 31 + $(LC_CTYPE=C printf %d "\'$char")) % 4294967296))\n    str="${str#?}"\n  done\n  printf %x\\\\n $h\n}\n\nverbose() { :; }\n[ "${MVNW_VERBOSE-}" != true ] || verbose() { printf %s\\\\n "${1-}"; }\n\ndie() {\n  printf %s\\\\n "$1" >&2\n  exit 1\n}\n\ntrim() {\n  # MWRAPPER-139:\n  #   Trims trailing and leading whitespace, carriage returns, tabs, and linefeeds.\n  #   Needed for removing poorly interpreted newline sequences when running in more\n  #   exotic environments such as mingw bash on Windows.\n  printf "%s" "${1}" | tr -d \'[:space:]\'\n}\n\nscriptDir="$(dirname "$0")"\nscriptName="$(basename "$0")"\n\n# parse distributionUrl and optional distributionSha256Sum, requires .mvn/wrapper/maven-wrapper.properties\nwhile IFS="=" read -r key value; do\n  case "${key-}" in\n  distributionUrl) distributionUrl=$(trim "${value-}") ;;\n  distributionSha256Sum) distributionSha256Sum=$(trim "${value-}") ;;\n  esac\ndone <"$scriptDir/.mvn/wrapper/maven-wrapper.properties"\n[ -n "${distributionUrl-}" ] || die "cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties"\n\ncase "${distributionUrl##*/}" in\nmaven-mvnd-*bin.*)\n  MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/\n  case "${PROCESSOR_ARCHITECTURE-}${PROCESSOR_ARCHITEW6432-}:$(uname -a)" in\n  *AMD64:CYGWIN* | *AMD64:MINGW*) distributionPlatform=windows-amd64 ;;\n  :Darwin*x86_64) distributionPlatform=darwin-amd64 ;;\n  :Darwin*arm64) distributionPlatform=darwin-aarch64 ;;\n  :Linux*x86_64*) distributionPlatform=linux-amd64 ;;\n  *)\n    echo "Cannot detect native platform for mvnd on $(uname)-$(uname -m), use pure java version" >&2\n    distributionPlatform=linux-amd64\n    ;;\n  esac\n  distributionUrl="${distributionUrl%-bin.*}-$distributionPlatform.zip"\n  ;;\nmaven-mvnd-*) MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/ ;;\n*) MVN_CMD="mvn${scriptName#mvnw}" _MVNW_REPO_PATTERN=/org/apache/maven/ ;;\nesac\n\n# apply MVNW_REPOURL and calculate MAVEN_HOME\n# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>\n[ -z "${MVNW_REPOURL-}" ] || distributionUrl="$MVNW_REPOURL$_MVNW_REPO_PATTERN${distributionUrl#*"$_MVNW_REPO_PATTERN"}"\ndistributionUrlName="${distributionUrl##*/}"\ndistributionUrlNameMain="${distributionUrlName%.*}"\ndistributionUrlNameMain="${distributionUrlNameMain%-bin}"\nMAVEN_USER_HOME="${MAVEN_USER_HOME:-${HOME}/.m2}"\nMAVEN_HOME="${MAVEN_USER_HOME}/wrapper/dists/${distributionUrlNameMain-}/$(hash_string "$distributionUrl")"\n\nexec_maven() {\n  unset MVNW_VERBOSE MVNW_USERNAME MVNW_PASSWORD MVNW_REPOURL || :\n  exec "$MAVEN_HOME/bin/$MVN_CMD" "$@" || die "cannot exec $MAVEN_HOME/bin/$MVN_CMD"\n}\n\nif [ -d "$MAVEN_HOME" ]; then\n  verbose "found existing MAVEN_HOME at $MAVEN_HOME"\n  exec_maven "$@"\nfi\n\ncase "${distributionUrl-}" in\n*?-bin.zip | *?maven-mvnd-?*-?*.zip) ;;\n*) die "distributionUrl is not valid, must match *-bin.zip or maven-mvnd-*.zip, but found \'${distributionUrl-}\'" ;;\nesac\n\n# prepare tmp dir\nif TMP_DOWNLOAD_DIR="$(mktemp -d)" && [ -d "$TMP_DOWNLOAD_DIR" ]; then\n  clean() { rm -rf -- "$TMP_DOWNLOAD_DIR"; }\n  trap clean HUP INT TERM EXIT\nelse\n  die "cannot create temp dir"\nfi\n\nmkdir -p -- "${MAVEN_HOME%/*}"\n\n# Download and Install Apache Maven\nverbose "Couldn\'t find MAVEN_HOME, downloading and installing it ..."\nverbose "Downloading from: $distributionUrl"\nverbose "Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName"\n\n# select .zip or .tar.gz\nif ! command -v unzip >/dev/null; then\n  distributionUrl="${distributionUrl%.zip}.tar.gz"\n  distributionUrlName="${distributionUrl##*/}"\nfi\n\n# verbose opt\n__MVNW_QUIET_WGET=--quiet __MVNW_QUIET_CURL=--silent __MVNW_QUIET_UNZIP=-q __MVNW_QUIET_TAR=\'\'\n[ "${MVNW_VERBOSE-}" != true ] || __MVNW_QUIET_WGET=\'\' __MVNW_QUIET_CURL=\'\' __MVNW_QUIET_UNZIP=\'\' __MVNW_QUIET_TAR=v\n\n# normalize http auth\ncase "${MVNW_PASSWORD:+has-password}" in\n\'\') MVNW_USERNAME=\'\' MVNW_PASSWORD=\'\' ;;\nhas-password) [ -n "${MVNW_USERNAME-}" ] || MVNW_USERNAME=\'\' MVNW_PASSWORD=\'\' ;;\nesac\n\nif [ -z "${MVNW_USERNAME-}" ] && command -v wget >/dev/null; then\n  verbose "Found wget ... using wget"\n  wget ${__MVNW_QUIET_WGET:+"$__MVNW_QUIET_WGET"} "$distributionUrl" -O "$TMP_DOWNLOAD_DIR/$distributionUrlName" || die "wget: Failed to fetch $distributionUrl"\nelif [ -z "${MVNW_USERNAME-}" ] && command -v curl >/dev/null; then\n  verbose "Found curl ... using curl"\n  curl ${__MVNW_QUIET_CURL:+"$__MVNW_QUIET_CURL"} -f -L -o "$TMP_DOWNLOAD_DIR/$distributionUrlName" "$distributionUrl" || die "curl: Failed to fetch $distributionUrl"\nelif set_java_home; then\n  verbose "Falling back to use Java to download"\n  javaSource="$TMP_DOWNLOAD_DIR/Downloader.java"\n  targetZip="$TMP_DOWNLOAD_DIR/$distributionUrlName"\n  cat >"$javaSource" <<-END\n\tpublic class Downloader extends java.net.Authenticator\n\t{\n\t  protected java.net.PasswordAuthentication getPasswordAuthentication()\n\t  {\n\t    return new java.net.PasswordAuthentication( System.getenv( "MVNW_USERNAME" ), System.getenv( "MVNW_PASSWORD" ).toCharArray() );\n\t  }\n\t  public static void main( String[] args ) throws Exception\n\t  {\n\t    setDefault( new Downloader() );\n\t    java.nio.file.Files.copy( java.net.URI.create( args[0] ).toURL().openStream(), java.nio.file.Paths.get( args[1] ).toAbsolutePath().normalize() );\n\t  }\n\t}\n\tEND\n  # For Cygwin/MinGW, switch paths to Windows format before running javac and java\n  verbose " - Compiling Downloader.java ..."\n  "$(native_path "$JAVACCMD")" "$(native_path "$javaSource")" || die "Failed to compile Downloader.java"\n  verbose " - Running Downloader.java ..."\n  "$(native_path "$JAVACMD")" -cp "$(native_path "$TMP_DOWNLOAD_DIR")" Downloader "$distributionUrl" "$(native_path "$targetZip")"\nfi\n\n# If specified, validate the SHA-256 sum of the Maven distribution zip file\nif [ -n "${distributionSha256Sum-}" ]; then\n  distributionSha256Result=false\n  if [ "$MVN_CMD" = mvnd.sh ]; then\n    echo "Checksum validation is not supported for maven-mvnd." >&2\n    echo "Please disable validation by removing \'distributionSha256Sum\' from your maven-wrapper.properties." >&2\n    exit 1\n  elif command -v sha256sum >/dev/null; then\n    if echo "$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName" | sha256sum -c - >/dev/null 2>&1; then\n      distributionSha256Result=true\n    fi\n  elif command -v shasum >/dev/null; then\n    if echo "$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName" | shasum -a 256 -c >/dev/null 2>&1; then\n      distributionSha256Result=true\n    fi\n  else\n    echo "Checksum validation was requested but neither \'sha256sum\' or \'shasum\' are available." >&2\n    echo "Please install either command, or disable validation by removing \'distributionSha256Sum\' from your maven-wrapper.properties." >&2\n    exit 1\n  fi\n  if [ $distributionSha256Result = false ]; then\n    echo "Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised." >&2\n    echo "If you updated your Maven version, you need to update the specified distributionSha256Sum property." >&2\n    exit 1\n  fi\nfi\n\n# unzip and move\nif command -v unzip >/dev/null; then\n  unzip ${__MVNW_QUIET_UNZIP:+"$__MVNW_QUIET_UNZIP"} "$TMP_DOWNLOAD_DIR/$distributionUrlName" -d "$TMP_DOWNLOAD_DIR" || die "failed to unzip"\nelse\n  tar xzf${__MVNW_QUIET_TAR:+"$__MVNW_QUIET_TAR"} "$TMP_DOWNLOAD_DIR/$distributionUrlName" -C "$TMP_DOWNLOAD_DIR" || die "failed to untar"\nfi\n\n# Find the actual extracted directory name (handles snapshots where filename != directory name)\nactualDistributionDir=""\n\n# First try the expected directory name (for regular distributions)\nif [ -d "$TMP_DOWNLOAD_DIR/$distributionUrlNameMain" ]; then\n  if [ -f "$TMP_DOWNLOAD_DIR/$distributionUrlNameMain/bin/$MVN_CMD" ]; then\n    actualDistributionDir="$distributionUrlNameMain"\n  fi\nfi\n\n# If not found, search for any directory with the Maven executable (for snapshots)\nif [ -z "$actualDistributionDir" ]; then\n  # enable globbing to iterate over items\n  set +f\n  for dir in "$TMP_DOWNLOAD_DIR"/*; do\n    if [ -d "$dir" ]; then\n      if [ -f "$dir/bin/$MVN_CMD" ]; then\n        actualDistributionDir="$(basename "$dir")"\n        break\n      fi\n    fi\n  done\n  set -f\nfi\n\nif [ -z "$actualDistributionDir" ]; then\n  verbose "Contents of $TMP_DOWNLOAD_DIR:"\n  verbose "$(ls -la "$TMP_DOWNLOAD_DIR")"\n  die "Could not find Maven distribution directory in extracted archive"\nfi\n\nverbose "Found extracted Maven distribution directory: $actualDistributionDir"\nprintf %s\\\\n "$distributionUrl" >"$TMP_DOWNLOAD_DIR/$actualDistributionDir/mvnw.url"\nmv -- "$TMP_DOWNLOAD_DIR/$actualDistributionDir" "$MAVEN_HOME" || [ -d "$MAVEN_HOME" ] || die "fail to move MAVEN_HOME"\n\nclean || :\nexec_maven "$@"\n')
    create_file(r'mvnw.cmd', '<# : batch portion\n@REM ----------------------------------------------------------------------------\n@REM Licensed to the Apache Software Foundation (ASF) under one\n@REM or more contributor license agreements.  See the NOTICE file\n@REM distributed with this work for additional information\n@REM regarding copyright ownership.  The ASF licenses this file\n@REM to you under the Apache License, Version 2.0 (the\n@REM "License"); you may not use this file except in compliance\n@REM with the License.  You may obtain a copy of the License at\n@REM\n@REM    http://www.apache.org/licenses/LICENSE-2.0\n@REM\n@REM Unless required by applicable law or agreed to in writing,\n@REM software distributed under the License is distributed on an\n@REM "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n@REM KIND, either express or implied.  See the License for the\n@REM specific language governing permissions and limitations\n@REM under the License.\n@REM ----------------------------------------------------------------------------\n\n@REM ----------------------------------------------------------------------------\n@REM Apache Maven Wrapper startup batch script, version 3.3.4\n@REM\n@REM Optional ENV vars\n@REM   MVNW_REPOURL - repo url base for downloading maven distribution\n@REM   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven\n@REM   MVNW_VERBOSE - true: enable verbose log; others: silence the output\n@REM ----------------------------------------------------------------------------\n\n@IF "%__MVNW_ARG0_NAME__%"=="" (SET __MVNW_ARG0_NAME__=%~nx0)\n@SET __MVNW_CMD__=\n@SET __MVNW_ERROR__=\n@SET __MVNW_PSMODULEP_SAVE=%PSModulePath%\n@SET PSModulePath=\n@FOR /F "usebackq tokens=1* delims==" %%A IN (`powershell -noprofile "& {$scriptDir=\'%~dp0\'; $script=\'%__MVNW_ARG0_NAME__%\'; icm -ScriptBlock ([Scriptblock]::Create((Get-Content -Raw \'%~f0\'))) -NoNewScope}"`) DO @(\n  IF "%%A"=="MVN_CMD" (set __MVNW_CMD__=%%B) ELSE IF "%%B"=="" (echo %%A) ELSE (echo %%A=%%B)\n)\n@SET PSModulePath=%__MVNW_PSMODULEP_SAVE%\n@SET __MVNW_PSMODULEP_SAVE=\n@SET __MVNW_ARG0_NAME__=\n@SET MVNW_USERNAME=\n@SET MVNW_PASSWORD=\n@IF NOT "%__MVNW_CMD__%"=="" ("%__MVNW_CMD__%" %*)\n@echo Cannot start maven from wrapper >&2 && exit /b 1\n@GOTO :EOF\n: end batch / begin powershell #>\n\n$ErrorActionPreference = "Stop"\nif ($env:MVNW_VERBOSE -eq "true") {\n  $VerbosePreference = "Continue"\n}\n\n# calculate distributionUrl, requires .mvn/wrapper/maven-wrapper.properties\n$distributionUrl = (Get-Content -Raw "$scriptDir/.mvn/wrapper/maven-wrapper.properties" | ConvertFrom-StringData).distributionUrl\nif (!$distributionUrl) {\n  Write-Error "cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties"\n}\n\nswitch -wildcard -casesensitive ( $($distributionUrl -replace \'^.*/\',\'\') ) {\n  "maven-mvnd-*" {\n    $USE_MVND = $true\n    $distributionUrl = $distributionUrl -replace \'-bin\\.[^.]*$\',"-windows-amd64.zip"\n    $MVN_CMD = "mvnd.cmd"\n    break\n  }\n  default {\n    $USE_MVND = $false\n    $MVN_CMD = $script -replace \'^mvnw\',\'mvn\'\n    break\n  }\n}\n\n# apply MVNW_REPOURL and calculate MAVEN_HOME\n# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>\nif ($env:MVNW_REPOURL) {\n  $MVNW_REPO_PATTERN = if ($USE_MVND -eq $False) { "/org/apache/maven/" } else { "/maven/mvnd/" }\n  $distributionUrl = "$env:MVNW_REPOURL$MVNW_REPO_PATTERN$($distributionUrl -replace "^.*$MVNW_REPO_PATTERN",\'\')"\n}\n$distributionUrlName = $distributionUrl -replace \'^.*/\',\'\'\n$distributionUrlNameMain = $distributionUrlName -replace \'\\.[^.]*$\',\'\' -replace \'-bin$\',\'\'\n\n$MAVEN_M2_PATH = "$HOME/.m2"\nif ($env:MAVEN_USER_HOME) {\n  $MAVEN_M2_PATH = "$env:MAVEN_USER_HOME"\n}\n\nif (-not (Test-Path -Path $MAVEN_M2_PATH)) {\n    New-Item -Path $MAVEN_M2_PATH -ItemType Directory | Out-Null\n}\n\n$MAVEN_WRAPPER_DISTS = $null\nif ((Get-Item $MAVEN_M2_PATH).Target[0] -eq $null) {\n  $MAVEN_WRAPPER_DISTS = "$MAVEN_M2_PATH/wrapper/dists"\n} else {\n  $MAVEN_WRAPPER_DISTS = (Get-Item $MAVEN_M2_PATH).Target[0] + "/wrapper/dists"\n}\n\n$MAVEN_HOME_PARENT = "$MAVEN_WRAPPER_DISTS/$distributionUrlNameMain"\n$MAVEN_HOME_NAME = ([System.Security.Cryptography.SHA256]::Create().ComputeHash([byte[]][char[]]$distributionUrl) | ForEach-Object {$_.ToString("x2")}) -join \'\'\n$MAVEN_HOME = "$MAVEN_HOME_PARENT/$MAVEN_HOME_NAME"\n\nif (Test-Path -Path "$MAVEN_HOME" -PathType Container) {\n  Write-Verbose "found existing MAVEN_HOME at $MAVEN_HOME"\n  Write-Output "MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD"\n  exit $?\n}\n\nif (! $distributionUrlNameMain -or ($distributionUrlName -eq $distributionUrlNameMain)) {\n  Write-Error "distributionUrl is not valid, must end with *-bin.zip, but found $distributionUrl"\n}\n\n# prepare tmp dir\n$TMP_DOWNLOAD_DIR_HOLDER = New-TemporaryFile\n$TMP_DOWNLOAD_DIR = New-Item -Itemtype Directory -Path "$TMP_DOWNLOAD_DIR_HOLDER.dir"\n$TMP_DOWNLOAD_DIR_HOLDER.Delete() | Out-Null\ntrap {\n  if ($TMP_DOWNLOAD_DIR.Exists) {\n    try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }\n    catch { Write-Warning "Cannot remove $TMP_DOWNLOAD_DIR" }\n  }\n}\n\nNew-Item -Itemtype Directory -Path "$MAVEN_HOME_PARENT" -Force | Out-Null\n\n# Download and Install Apache Maven\nWrite-Verbose "Couldn\'t find MAVEN_HOME, downloading and installing it ..."\nWrite-Verbose "Downloading from: $distributionUrl"\nWrite-Verbose "Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName"\n\n$webclient = New-Object System.Net.WebClient\nif ($env:MVNW_USERNAME -and $env:MVNW_PASSWORD) {\n  $webclient.Credentials = New-Object System.Net.NetworkCredential($env:MVNW_USERNAME, $env:MVNW_PASSWORD)\n}\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n$webclient.DownloadFile($distributionUrl, "$TMP_DOWNLOAD_DIR/$distributionUrlName") | Out-Null\n\n# If specified, validate the SHA-256 sum of the Maven distribution zip file\n$distributionSha256Sum = (Get-Content -Raw "$scriptDir/.mvn/wrapper/maven-wrapper.properties" | ConvertFrom-StringData).distributionSha256Sum\nif ($distributionSha256Sum) {\n  if ($USE_MVND) {\n    Write-Error "Checksum validation is not supported for maven-mvnd. `nPlease disable validation by removing \'distributionSha256Sum\' from your maven-wrapper.properties."\n  }\n  Import-Module $PSHOME\\Modules\\Microsoft.PowerShell.Utility -Function Get-FileHash\n  if ((Get-FileHash "$TMP_DOWNLOAD_DIR/$distributionUrlName" -Algorithm SHA256).Hash.ToLower() -ne $distributionSha256Sum) {\n    Write-Error "Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised. If you updated your Maven version, you need to update the specified distributionSha256Sum property."\n  }\n}\n\n# unzip and move\nExpand-Archive "$TMP_DOWNLOAD_DIR/$distributionUrlName" -DestinationPath "$TMP_DOWNLOAD_DIR" | Out-Null\n\n# Find the actual extracted directory name (handles snapshots where filename != directory name)\n$actualDistributionDir = ""\n\n# First try the expected directory name (for regular distributions)\n$expectedPath = Join-Path "$TMP_DOWNLOAD_DIR" "$distributionUrlNameMain"\n$expectedMvnPath = Join-Path "$expectedPath" "bin/$MVN_CMD"\nif ((Test-Path -Path $expectedPath -PathType Container) -and (Test-Path -Path $expectedMvnPath -PathType Leaf)) {\n  $actualDistributionDir = $distributionUrlNameMain\n}\n\n# If not found, search for any directory with the Maven executable (for snapshots)\nif (!$actualDistributionDir) {\n  Get-ChildItem -Path "$TMP_DOWNLOAD_DIR" -Directory | ForEach-Object {\n    $testPath = Join-Path $_.FullName "bin/$MVN_CMD"\n    if (Test-Path -Path $testPath -PathType Leaf) {\n      $actualDistributionDir = $_.Name\n    }\n  }\n}\n\nif (!$actualDistributionDir) {\n  Write-Error "Could not find Maven distribution directory in extracted archive"\n}\n\nWrite-Verbose "Found extracted Maven distribution directory: $actualDistributionDir"\nRename-Item -Path "$TMP_DOWNLOAD_DIR/$actualDistributionDir" -NewName $MAVEN_HOME_NAME | Out-Null\ntry {\n  Move-Item -Path "$TMP_DOWNLOAD_DIR/$MAVEN_HOME_NAME" -Destination $MAVEN_HOME_PARENT | Out-Null\n} catch {\n  if (! (Test-Path -Path "$MAVEN_HOME" -PathType Container)) {\n    Write-Error "fail to move MAVEN_HOME"\n  }\n} finally {\n  try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }\n  catch { Write-Warning "Cannot remove $TMP_DOWNLOAD_DIR" }\n}\n\nWrite-Output "MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD"\n')
    create_file(r'pom.xml', '<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n\txsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n\t<modelVersion>4.0.0</modelVersion>\n\t<parent>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\n\t\t<version>3.5.10-SNAPSHOT</version>\n\t\t<relativePath/> <!-- lookup parent from repository -->\n\t</parent>\n\t<groupId>com.example</groupId>\n\t<artifactId>demo</artifactId>\n\t<version>0.0.1-SNAPSHOT</version>\n\t<name>demo</name>\n\t<description>Demo project for Spring Boot</description>\n\t<url/>\n\t<licenses>\n\t\t<license/>\n\t</licenses>\n\t<developers>\n\t\t<developer/>\n\t</developers>\n\t<scm>\n\t\t<connection/>\n\t\t<developerConnection/>\n\t\t<tag/>\n\t\t<url/>\n\t</scm>\n\t<properties>\n\t\t<java.version>17</java.version>\n\t</properties>\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-data-jpa</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-security</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-validation</artifactId>\n\t\t</dependency>\n\t\t\n\t\t<dependency>\n\t\t\t<groupId>com.mysql</groupId>\n\t\t\t<artifactId>mysql-connector-j</artifactId>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>com.h2database</groupId>\n\t\t\t<artifactId>h2</artifactId>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\n\t\t<!-- JWT -->\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-api</artifactId>\n\t\t\t<version>0.12.3</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-impl</artifactId>\n\t\t\t<version>0.12.3</version>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-jackson</artifactId>\n\t\t\t<version>0.12.3</version>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\n\t\t<!-- Swagger -->\n\t\t<dependency>\n\t\t\t<groupId>org.springdoc</groupId>\n\t\t\t<artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>\n\t\t\t<version>2.0.2</version>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t\t<exclusions>\n\t\t\t\t<exclusion>\n\t\t\t\t\t<groupId>org.junit.vintage</groupId>\n\t\t\t\t\t<artifactId>junit-vintage-engine</artifactId>\n\t\t\t\t</exclusion>\n\t\t\t\t<exclusion>\n\t\t\t\t\t<groupId>org.junit.jupiter</groupId>\n\t\t\t\t\t<artifactId>junit-jupiter</artifactId>\n\t\t\t\t</exclusion>\n\t\t\t\t<exclusion>\n\t\t\t\t\t<groupId>org.mockito</groupId>\n\t\t\t\t\t<artifactId>mockito-junit-jupiter</artifactId>\n\t\t\t\t</exclusion>\n\t\t\t</exclusions>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.testng</groupId>\n\t\t\t<artifactId>testng</artifactId>\n\t\t\t<version>7.7.0</version>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t</dependencies>\n\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n\t\t\t</plugin>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n\t\t\t\t<artifactId>maven-surefire-plugin</artifactId>\n\t\t\t\t<version>3.2.5</version>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n\t<repositories>\n\t\t<repository>\n\t\t\t<id>spring-snapshots</id>\n\t\t\t<name>Spring Snapshots</name>\n\t\t\t<url>https://repo.spring.io/snapshot</url>\n\t\t\t<releases>\n\t\t\t\t<enabled>false</enabled>\n\t\t\t</releases>\n\t\t</repository>\n\t</repositories>\n\t<pluginRepositories>\n\t\t<pluginRepository>\n\t\t\t<id>spring-snapshots</id>\n\t\t\t<name>Spring Snapshots</name>\n\t\t\t<url>https://repo.spring.io/snapshot</url>\n\t\t\t<releases>\n\t\t\t\t<enabled>false</enabled>\n\t\t\t</releases>\n\t\t</pluginRepository>\n\t</pluginRepositories>\n\n</project>\n')
    create_file(r'.mvn/wrapper/maven-wrapper.properties', 'wrapperVersion=3.3.4\ndistributionType=only-script\ndistributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.12/apache-maven-3.9.12-bin.zip\n')
    create_file(r'src/main/java/com/example/demo/DemoApplication.java', 'package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(DemoApplication.class, args);\n\t}\n\n}\n')
    create_file(r'src/main/java/com/example/demo/config/SecurityConfig.java', 'package com.example.demo.config;\n\nimport com.example.demo.security.JwtAuthenticationFilter;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private final JwtAuthenticationFilter jwtAuthFilter;\n\n    public SecurityConfig(JwtAuthenticationFilter jwtAuthFilter) {\n        this.jwtAuthFilter = jwtAuthFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(csrf -> csrf.disable())\n                .authorizeHttpRequests(auth -> auth\n                        .requestMatchers("/auth/**").permitAll()\n                        .requestMatchers("/v3/api-docs/**", "/swagger-ui/**", "/swagger-ui.html").permitAll()\n                        .anyRequest().authenticated()\n                )\n                .sessionManagement(sess -> sess.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/controller/ActivityCategoryController.java', 'package com.example.demo.controller;\n\nimport com.example.demo.entity.ActivityCategory;\nimport com.example.demo.service.ActivityCategoryService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping("/api/categories")\npublic class ActivityCategoryController {\n\n    private final ActivityCategoryService categoryService;\n\n    public ActivityCategoryController(ActivityCategoryService categoryService) {\n        this.categoryService = categoryService;\n    }\n\n    @PostMapping\n    public ResponseEntity<ActivityCategory> createCategory(@RequestBody ActivityCategory category) {\n        return ResponseEntity.ok(categoryService.createCategory(category));\n    }\n\n    @GetMapping\n    public ResponseEntity<List<ActivityCategory>> getAllCategories() {\n        return ResponseEntity.ok(categoryService.getAllCategories());\n    }\n\n    @GetMapping("/{id}")\n    public ResponseEntity<ActivityCategory> getCategory(@PathVariable Long id) {\n        return ResponseEntity.ok(categoryService.getCategory(id));\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/controller/ActivityLogController.java', 'package com.example.demo.controller;\n\nimport com.example.demo.dto.ActivityLogRequest;\nimport com.example.demo.entity.ActivityLog;\nimport com.example.demo.service.ActivityLogService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@RestController\n@RequestMapping("/api/logs")\npublic class ActivityLogController {\n\n    private final ActivityLogService logService;\n\n    public ActivityLogController(ActivityLogService logService) {\n        this.logService = logService;\n    }\n\n    @PostMapping("/{userId}/{typeId}")\n    public ResponseEntity<ActivityLog> logActivity(\n            @PathVariable Long userId,\n            @PathVariable Long typeId,\n            @RequestBody ActivityLogRequest request) {\n        \n        ActivityLog log = new ActivityLog();\n        log.setQuantity(request.getQuantity());\n        log.setActivityDate(request.getActivityDate());\n        \n        return ResponseEntity.ok(logService.logActivity(userId, typeId, log));\n    }\n\n    @GetMapping("/user/{userId}")\n    public ResponseEntity<List<ActivityLog>> getLogsByUser(@PathVariable Long userId) {\n        return ResponseEntity.ok(logService.getLogsByUser(userId));\n    }\n\n    @GetMapping("/user/{userId}/range")\n    public ResponseEntity<List<ActivityLog>> getLogsByRange(\n            @PathVariable Long userId,\n            @RequestParam LocalDate start,\n            @RequestParam LocalDate end) {\n        return ResponseEntity.ok(logService.getLogsByUserAndDate(userId, start, end));\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/controller/ActivityTypeController.java', 'package com.example.demo.controller;\n\nimport com.example.demo.entity.ActivityType;\nimport com.example.demo.service.ActivityTypeService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping("/api/types")\npublic class ActivityTypeController {\n\n    private final ActivityTypeService typeService;\n\n    public ActivityTypeController(ActivityTypeService typeService) {\n        this.typeService = typeService;\n    }\n\n    @PostMapping("/category/{categoryId}")\n    public ResponseEntity<ActivityType> createType(@PathVariable Long categoryId, @RequestBody ActivityType type) {\n        return ResponseEntity.ok(typeService.createType(categoryId, type));\n    }\n\n    @GetMapping("/{id}")\n    public ResponseEntity<ActivityType> getType(@PathVariable Long id) {\n        return ResponseEntity.ok(typeService.getType(id));\n    }\n\n    @GetMapping("/category/{categoryId}")\n    public ResponseEntity<List<ActivityType>> getTypesByCategory(@PathVariable Long categoryId) {\n        return ResponseEntity.ok(typeService.getTypesByCategory(categoryId));\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/controller/AuthController.java', 'package com.example.demo.controller;\n\nimport com.example.demo.dto.LoginRequest;\nimport com.example.demo.dto.RegisterRequest;\nimport com.example.demo.entity.User;\nimport com.example.demo.security.JwtUtil;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RestController\n@RequestMapping("/auth")\npublic class AuthController {\n\n    private final UserService userService;\n    private final AuthenticationManager authenticationManager;\n    private final JwtUtil jwtUtil;\n\n    public AuthController(UserService userService, AuthenticationManager authenticationManager, JwtUtil jwtUtil) {\n        this.userService = userService;\n        this.authenticationManager = authenticationManager;\n        this.jwtUtil = jwtUtil;\n    }\n\n    @PostMapping("/register")\n    public ResponseEntity<User> register(@RequestBody RegisterRequest request) {\n        User user = new User();\n        user.setFullName(request.getName());\n        user.setEmail(request.getEmail());\n        user.setPassword(request.getPassword());\n        // Role default handled in service\n        return ResponseEntity.ok(userService.registerUser(user));\n    }\n\n    @PostMapping("/login")\n    public ResponseEntity<Map<String, String>> login(@RequestBody LoginRequest request) {\n        authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(request.getEmail(), request.getPassword())\n        );\n        User user = userService.getByEmail(request.getEmail());\n        String token = jwtUtil.generateTokenForUser(user);\n        Map<String, String> resp = new HashMap<>();\n        resp.put("token", token);\n        return ResponseEntity.ok(resp);\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/controller/EmissionFactorController.java', 'package com.example.demo.controller;\n\nimport com.example.demo.entity.EmissionFactor;\nimport com.example.demo.service.EmissionFactorService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping("/api/factors")\npublic class EmissionFactorController {\n\n    private final EmissionFactorService factorService;\n\n    public EmissionFactorController(EmissionFactorService factorService) {\n        this.factorService = factorService;\n    }\n\n    @PostMapping("/type/{typeId}")\n    public ResponseEntity<EmissionFactor> createFactor(@PathVariable Long typeId, @RequestBody EmissionFactor factor) {\n        return ResponseEntity.ok(factorService.createFactor(typeId, factor));\n    }\n\n    @GetMapping("/{id}")\n    public ResponseEntity<EmissionFactor> getFactor(@PathVariable Long id) {\n        return ResponseEntity.ok(factorService.getFactor(id));\n    }\n\n    @GetMapping("/type/{typeId}")\n    public ResponseEntity<EmissionFactor> getFactorByType(@PathVariable Long typeId) {\n        return ResponseEntity.ok(factorService.getFactorByType(typeId));\n    }\n\n    @GetMapping\n    public ResponseEntity<List<EmissionFactor>> getAllFactors() {\n        return ResponseEntity.ok(factorService.getAllFactors());\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/controller/UserController.java', 'package com.example.demo.controller;\n\nimport com.example.demo.entity.User;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping("/api/users")\npublic class UserController {\n\n    private final UserService userService;\n\n    public UserController(UserService userService) {\n        this.userService = userService;\n    }\n\n    @GetMapping("/{id}")\n    public ResponseEntity<User> getUser(@PathVariable Long id) {\n        return ResponseEntity.ok(userService.getUser(id));\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/dto/ActivityLogRequest.java', 'package com.example.demo.dto;\n\nimport java.time.LocalDate;\n\npublic class ActivityLogRequest {\n    private Double quantity;\n    private LocalDate activityDate;\n\n    public ActivityLogRequest() {\n    }\n\n    public ActivityLogRequest(Double quantity, LocalDate activityDate) {\n        this.quantity = quantity;\n        this.activityDate = activityDate;\n    }\n\n    public Double getQuantity() {\n        return quantity;\n    }\n\n    public void setQuantity(Double quantity) {\n        this.quantity = quantity;\n    }\n\n    public LocalDate getActivityDate() {\n        return activityDate;\n    }\n\n    public void setActivityDate(LocalDate activityDate) {\n        this.activityDate = activityDate;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/dto/LoginRequest.java', 'package com.example.demo.dto;\n\npublic class LoginRequest {\n    private String email;\n    private String password;\n\n    public LoginRequest() {\n    }\n\n    public LoginRequest(String email, String password) {\n        this.email = email;\n        this.password = password;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/dto/RegisterRequest.java', 'package com.example.demo.dto;\n\npublic class RegisterRequest {\n    private String name;\n    private String email;\n    private String password;\n\n    public RegisterRequest() {\n    }\n\n    public RegisterRequest(String name, String email, String password) {\n        this.name = name;\n        this.email = email;\n        this.password = password;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/entity/ActivityCategory.java', 'package com.example.demo.entity;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = "activity_categories")\npublic class ActivityCategory {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true, nullable = false)\n    private String categoryName;\n\n    private String description;\n\n    private LocalDateTime createdAt;\n\n    public ActivityCategory() {\n    }\n\n    public ActivityCategory(Long id, String categoryName, String description, LocalDateTime createdAt) {\n        this.id = id;\n        this.categoryName = categoryName;\n        this.description = description;\n        this.createdAt = createdAt;\n    }\n\n    @PrePersist\n    public void prePersist() {\n        this.createdAt = LocalDateTime.now();\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getCategoryName() {\n        return categoryName;\n    }\n\n    public void setCategoryName(String categoryName) {\n        this.categoryName = categoryName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public LocalDateTime getCreatedAt() {\n        return createdAt;\n    }\n\n    public void setCreatedAt(LocalDateTime createdAt) {\n        this.createdAt = createdAt;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/entity/ActivityLog.java', 'package com.example.demo.entity;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = "activity_logs")\npublic class ActivityLog {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(optional = false)\n    @JoinColumn(name = "activity_type_id")\n    private ActivityType activityType;\n\n    @ManyToOne(optional = false)\n    @JoinColumn(name = "user_id")\n    private User user;\n\n    private Double quantity;\n\n    private LocalDate activityDate;\n\n    private LocalDateTime loggedAt;\n\n    private Double estimatedEmission;\n\n    public ActivityLog() {\n    }\n\n    public ActivityLog(Long id, ActivityType activityType, User user, Double quantity, LocalDate activityDate, LocalDateTime loggedAt, Double estimatedEmission) {\n        this.id = id;\n        this.activityType = activityType;\n        this.user = user;\n        this.quantity = quantity;\n        this.activityDate = activityDate;\n        this.loggedAt = loggedAt;\n        this.estimatedEmission = estimatedEmission;\n    }\n\n    @PrePersist\n    public void prePersist() {\n        this.loggedAt = LocalDateTime.now();\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public ActivityType getActivityType() {\n        return activityType;\n    }\n\n    public void setActivityType(ActivityType activityType) {\n        this.activityType = activityType;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public Double getQuantity() {\n        return quantity;\n    }\n\n    public void setQuantity(Double quantity) {\n        this.quantity = quantity;\n    }\n\n    public LocalDate getActivityDate() {\n        return activityDate;\n    }\n\n    public void setActivityDate(LocalDate activityDate) {\n        this.activityDate = activityDate;\n    }\n\n    public LocalDateTime getLoggedAt() {\n        return loggedAt;\n    }\n\n    public void setLoggedAt(LocalDateTime loggedAt) {\n        this.loggedAt = loggedAt;\n    }\n\n    public Double getEstimatedEmission() {\n        return estimatedEmission;\n    }\n\n    public void setEstimatedEmission(Double estimatedEmission) {\n        this.estimatedEmission = estimatedEmission;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/entity/ActivityType.java', 'package com.example.demo.entity;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = "activity_types")\npublic class ActivityType {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String typeName;\n\n    @ManyToOne(optional = false)\n    @JoinColumn(name = "category_id")\n    private ActivityCategory category;\n\n    private String unit;\n\n    private LocalDateTime createdAt;\n\n    public ActivityType() {\n    }\n\n    public ActivityType(Long id, String typeName, ActivityCategory category, String unit, LocalDateTime createdAt) {\n        this.id = id;\n        this.typeName = typeName;\n        this.category = category;\n        this.unit = unit;\n        this.createdAt = createdAt;\n    }\n\n    @PrePersist\n    public void prePersist() {\n        this.createdAt = LocalDateTime.now();\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getTypeName() {\n        return typeName;\n    }\n\n    public void setTypeName(String typeName) {\n        this.typeName = typeName;\n    }\n\n    public ActivityCategory getCategory() {\n        return category;\n    }\n\n    public void setCategory(ActivityCategory category) {\n        this.category = category;\n    }\n\n    public String getUnit() {\n        return unit;\n    }\n\n    public void setUnit(String unit) {\n        this.unit = unit;\n    }\n\n    public LocalDateTime getCreatedAt() {\n        return createdAt;\n    }\n\n    public void setCreatedAt(LocalDateTime createdAt) {\n        this.createdAt = createdAt;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/entity/EmissionFactor.java', 'package com.example.demo.entity;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = "emission_factors")\npublic class EmissionFactor {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(optional = false)\n    @JoinColumn(name = "activity_type_id")\n    private ActivityType activityType;\n\n    private Double factorValue;\n\n    private String unit;\n\n    private LocalDateTime createdAt;\n\n    public EmissionFactor() {\n    }\n\n    public EmissionFactor(Long id, ActivityType activityType, Double factorValue, String unit, LocalDateTime createdAt) {\n        this.id = id;\n        this.activityType = activityType;\n        this.factorValue = factorValue;\n        this.unit = unit;\n        this.createdAt = createdAt;\n    }\n\n    @PrePersist\n    public void prePersist() {\n        this.createdAt = LocalDateTime.now();\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public ActivityType getActivityType() {\n        return activityType;\n    }\n\n    public void setActivityType(ActivityType activityType) {\n        this.activityType = activityType;\n    }\n\n    public Double getFactorValue() {\n        return factorValue;\n    }\n\n    public void setFactorValue(Double factorValue) {\n        this.factorValue = factorValue;\n    }\n\n    public String getUnit() {\n        return unit;\n    }\n\n    public void setUnit(String unit) {\n        this.unit = unit;\n    }\n\n    public LocalDateTime getCreatedAt() {\n        return createdAt;\n    }\n\n    public void setCreatedAt(LocalDateTime createdAt) {\n        this.createdAt = createdAt;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/entity/User.java', 'package com.example.demo.entity;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = "users")\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String fullName;\n\n    @Column(unique = true, nullable = false)\n    private String email;\n\n    @Column(nullable = false)\n    private String password;\n\n    private String role;\n\n    private LocalDateTime createdAt;\n\n    public User() {\n    }\n\n    public User(Long id, String fullName, String email, String password, String role, LocalDateTime createdAt) {\n        this.id = id;\n        this.fullName = fullName;\n        this.email = email;\n        this.password = password;\n        this.role = role;\n        this.createdAt = createdAt;\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        this.createdAt = LocalDateTime.now();\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getFullName() {\n        return fullName;\n    }\n\n    public void setFullName(String fullName) {\n        this.fullName = fullName;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n\n    public LocalDateTime getCreatedAt() {\n        return createdAt;\n    }\n\n    public void setCreatedAt(LocalDateTime createdAt) {\n        this.createdAt = createdAt;\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/exception/GlobalExceptionHandler.java', 'package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.time.LocalDateTime;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(ResourceNotFoundException.class)\n    public ResponseEntity<Object> handleResourceNotFoundException(ResourceNotFoundException ex) {\n        Map<String, Object> body = new HashMap<>();\n        body.put("timestamp", LocalDateTime.now());\n        body.put("message", ex.getMessage());\n        body.put("status", HttpStatus.NOT_FOUND.value());\n        return new ResponseEntity<>(body, HttpStatus.NOT_FOUND);\n    }\n\n    @ExceptionHandler(ValidationException.class)\n    public ResponseEntity<Object> handleValidationException(ValidationException ex) {\n        Map<String, Object> body = new HashMap<>();\n        body.put("timestamp", LocalDateTime.now());\n        body.put("message", ex.getMessage());\n        body.put("status", HttpStatus.BAD_REQUEST.value());\n        return new ResponseEntity<>(body, HttpStatus.BAD_REQUEST);\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/exception/ResourceNotFoundException.java', 'package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.NOT_FOUND)\npublic class ResourceNotFoundException extends RuntimeException {\n    public ResourceNotFoundException(String message) {\n        super(message);\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/exception/ValidationException.java', 'package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic class ValidationException extends RuntimeException {\n    public ValidationException(String message) {\n        super(message);\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/repository/ActivityCategoryRepository.java', 'package com.example.demo.repository;\n\nimport com.example.demo.entity.ActivityCategory;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport java.util.Optional;\n\npublic interface ActivityCategoryRepository extends JpaRepository<ActivityCategory, Long> {\n    boolean existsByCategoryName(String categoryName);\n}\n')
    create_file(r'src/main/java/com/example/demo/repository/ActivityLogRepository.java', 'package com.example.demo.repository;\n\nimport com.example.demo.entity.ActivityLog;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic interface ActivityLogRepository extends JpaRepository<ActivityLog, Long> {\n    List<ActivityLog> findByUser_Id(Long userId);\n    List<ActivityLog> findByUser_IdAndActivityDateBetween(Long userId, LocalDate start, LocalDate end);\n}\n')
    create_file(r'src/main/java/com/example/demo/repository/ActivityTypeRepository.java', 'package com.example.demo.repository;\n\nimport com.example.demo.entity.ActivityType;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport java.util.List;\n\npublic interface ActivityTypeRepository extends JpaRepository<ActivityType, Long> {\n    List<ActivityType> findByCategory_Id(Long categoryId);\n}\n')
    create_file(r'src/main/java/com/example/demo/repository/EmissionFactorRepository.java', 'package com.example.demo.repository;\n\nimport com.example.demo.entity.EmissionFactor;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport java.util.Optional;\n\npublic interface EmissionFactorRepository extends JpaRepository<EmissionFactor, Long> {\n    Optional<EmissionFactor> findByActivityType_Id(Long typeId);\n}\n')
    create_file(r'src/main/java/com/example/demo/repository/UserRepository.java', 'package com.example.demo.repository;\n\nimport com.example.demo.entity.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport java.util.Optional;\n\npublic interface UserRepository extends JpaRepository<User, Long> {\n    boolean existsByEmail(String email);\n    Optional<User> findByEmail(String email);\n}\n')
    create_file(r'src/main/java/com/example/demo/security/CustomUserDetailsService.java', 'package com.example.demo.security;\n\nimport com.example.demo.entity.User;\nimport com.example.demo.repository.UserRepository;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Collections;\n\n@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    private final UserRepository userRepository;\n\n    public CustomUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\n        User user = userRepository.findByEmail(email)\n                .orElseThrow(() -> new UsernameNotFoundException("User not found"));\n\n        return new org.springframework.security.core.userdetails.User(\n                user.getEmail(),\n                user.getPassword(),\n                Collections.singletonList(new SimpleGrantedAuthority("ROLE_" + user.getRole()))\n        );\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/security/JwtAuthenticationFilter.java', 'package com.example.demo.security;\n\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport java.io.IOException;\n\n@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private final JwtUtil jwtUtil;\n    private final UserDetailsService userDetailsService;\n\n    public JwtAuthenticationFilter(JwtUtil jwtUtil, CustomUserDetailsService userDetailsService) {\n        this.jwtUtil = jwtUtil;\n        this.userDetailsService = userDetailsService;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n\n        final String authHeader = request.getHeader("Authorization");\n        final String userEmail;\n        final String jwt;\n\n        if (authHeader == null || !authHeader.startsWith("Bearer ")) {\n            chain.doFilter(request, response);\n            return;\n        }\n\n        jwt = authHeader.substring(7);\n        try {\n            userEmail = jwtUtil.extractUsername(jwt);\n            if (userEmail != null && SecurityContextHolder.getContext().getAuthentication() == null) {\n                UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\n                if (jwtUtil.isTokenValid(jwt, userDetails.getUsername())) {\n                    UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n                            userDetails,\n                            null,\n                            userDetails.getAuthorities()\n                    );\n                    authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                    SecurityContextHolder.getContext().setAuthentication(authToken);\n                }\n            }\n        } catch (Exception e) {\n            // Token invalid or expired\n        }\n        chain.doFilter(request, response);\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/security/JwtUtil.java', 'package com.example.demo.security;\n\nimport com.example.demo.entity.User;\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jws;\nimport io.jsonwebtoken.Jwts;\nimport org.springframework.stereotype.Component;\n\nimport javax.crypto.SecretKey;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Function;\n\n@Component\npublic class JwtUtil {\n\n    private final SecretKey SECRET_KEY = Jwts.SIG.HS256.key().build();\n    private final long EXPIRATION_TIME = 1000 * 60 * 60 * 10; // 10 hours\n\n    public String generateToken(Map<String, Object> claims, String subject) {\n        return Jwts.builder()\n                .claims(claims)\n                .subject(subject)\n                .issuedAt(new Date(System.currentTimeMillis()))\n                .expiration(new Date(System.currentTimeMillis() + EXPIRATION_TIME))\n                .signWith(SECRET_KEY)\n                .compact();\n    }\n\n    public String generateTokenForUser(User user) {\n        Map<String, Object> claims = new HashMap<>();\n        claims.put("userId", user.getId());\n        claims.put("email", user.getEmail());\n        claims.put("role", user.getRole());\n        return generateToken(claims, user.getEmail());\n    }\n\n    public String extractUsername(String token) {\n        return extractClaim(token, Claims::getSubject);\n    }\n\n    public String extractRole(String token) {\n        return extractClaim(token, claims -> claims.get("role", String.class));\n    }\n\n    public Long extractUserId(String token) {\n        return extractClaim(token, claims -> claims.get("userId", Long.class));\n    }\n\n    public <T> T extractClaim(String token, Function<Claims, T> claimsResolver) {\n        final Claims claims = parseToken(token).getPayload();\n        return claimsResolver.apply(claims);\n    }\n\n    public Jws<Claims> parseToken(String token) {\n        return Jwts.parser()\n                .verifyWith(SECRET_KEY)\n                .build()\n                .parseSignedClaims(token);\n    }\n\n    public boolean isTokenValid(String token, String username) {\n        final String extractedUsername = extractUsername(token);\n        return (extractedUsername.equals(username) && !isTokenExpired(token));\n    }\n\n    private boolean isTokenExpired(String token) {\n        return extractClaim(token, Claims::getExpiration).before(new Date());\n    }\n}')
    create_file(r'src/main/java/com/example/demo/service/ActivityCategoryService.java', 'package com.example.demo.service;\n\nimport com.example.demo.entity.ActivityCategory;\nimport java.util.List;\n\npublic interface ActivityCategoryService {\n    ActivityCategory createCategory(ActivityCategory category);\n    ActivityCategory getCategory(Long id);\n    List<ActivityCategory> getAllCategories();\n}\n')
    create_file(r'src/main/java/com/example/demo/service/ActivityLogService.java', 'package com.example.demo.service;\n\nimport com.example.demo.entity.ActivityLog;\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic interface ActivityLogService {\n    ActivityLog logActivity(Long userId, Long typeId, ActivityLog log);\n    List<ActivityLog> getLogsByUser(Long userId);\n    List<ActivityLog> getLogsByUserAndDate(Long userId, LocalDate start, LocalDate end);\n    ActivityLog getLog(Long id);\n}\n')
    create_file(r'src/main/java/com/example/demo/service/ActivityTypeService.java', 'package com.example.demo.service;\n\nimport com.example.demo.entity.ActivityType;\nimport java.util.List;\n\npublic interface ActivityTypeService {\n    ActivityType createType(Long categoryId, ActivityType type);\n    ActivityType getType(Long id);\n    List<ActivityType> getTypesByCategory(Long categoryId);\n}\n')
    create_file(r'src/main/java/com/example/demo/service/EmissionFactorService.java', 'package com.example.demo.service;\n\nimport com.example.demo.entity.EmissionFactor;\nimport java.util.List;\n\npublic interface EmissionFactorService {\n    EmissionFactor createFactor(Long activityTypeId, EmissionFactor factor);\n    EmissionFactor getFactor(Long id);\n    EmissionFactor getFactorByType(Long typeId);\n    List<EmissionFactor> getAllFactors();\n}\n')
    create_file(r'src/main/java/com/example/demo/service/UserService.java', 'package com.example.demo.service;\n\nimport com.example.demo.entity.User;\nimport java.util.List;\n\npublic interface UserService {\n    User registerUser(User user);\n    User getUser(Long id);\n    User getByEmail(String email);\n    List<User> getAllUsers();\n}\n')
    create_file(r'src/main/java/com/example/demo/service/impl/ActivityCategoryServiceImpl.java', 'package com.example.demo.service.impl;\n\nimport com.example.demo.entity.ActivityCategory;\nimport com.example.demo.exception.ResourceNotFoundException;\nimport com.example.demo.exception.ValidationException;\nimport com.example.demo.repository.ActivityCategoryRepository;\nimport com.example.demo.service.ActivityCategoryService;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class ActivityCategoryServiceImpl implements ActivityCategoryService {\n\n    private final ActivityCategoryRepository categoryRepository;\n\n    public ActivityCategoryServiceImpl(ActivityCategoryRepository categoryRepository) {\n        this.categoryRepository = categoryRepository;\n    }\n\n    @Override\n    public ActivityCategory createCategory(ActivityCategory category) {\n        if (categoryRepository.existsByCategoryName(category.getCategoryName())) {\n            throw new ValidationException("Category name must be unique");\n        }\n        return categoryRepository.save(category);\n    }\n\n    @Override\n    public ActivityCategory getCategory(Long id) {\n        return categoryRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException("Category not found"));\n    }\n\n    @Override\n    public List<ActivityCategory> getAllCategories() {\n        return categoryRepository.findAll();\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/service/impl/ActivityLogServiceImpl.java', 'package com.example.demo.service.impl;\n\nimport com.example.demo.entity.ActivityLog;\nimport com.example.demo.entity.ActivityType;\nimport com.example.demo.entity.EmissionFactor;\nimport com.example.demo.entity.User;\nimport com.example.demo.exception.ResourceNotFoundException;\nimport com.example.demo.exception.ValidationException;\nimport com.example.demo.repository.ActivityLogRepository;\nimport com.example.demo.repository.ActivityTypeRepository;\nimport com.example.demo.repository.EmissionFactorRepository;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.ActivityLogService;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Service\npublic class ActivityLogServiceImpl implements ActivityLogService {\n\n    private final ActivityLogRepository logRepository;\n    private final UserRepository userRepository;\n    private final ActivityTypeRepository typeRepository;\n    private final EmissionFactorRepository factorRepository;\n\n    public ActivityLogServiceImpl(ActivityLogRepository logRepository, UserRepository userRepository, ActivityTypeRepository typeRepository, EmissionFactorRepository factorRepository) {\n        this.logRepository = logRepository;\n        this.userRepository = userRepository;\n        this.typeRepository = typeRepository;\n        this.factorRepository = factorRepository;\n    }\n\n    @Override\n    public ActivityLog logActivity(Long userId, Long typeId, ActivityLog log) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new ResourceNotFoundException("User not found"));\n        \n        ActivityType type = typeRepository.findById(typeId)\n                .orElseThrow(() -> new ResourceNotFoundException("Category not found")); // Using "Category not found" as per spec hint or generic.\n        \n        if (log.getQuantity() == null || log.getQuantity() <= 0) {\n            throw new ValidationException("Quantity must be greater than zero");\n        }\n        \n        if (log.getActivityDate() != null && log.getActivityDate().isAfter(LocalDate.now())) {\n            throw new ValidationException("cannot be in the future");\n        }\n        \n        EmissionFactor factor = factorRepository.findByActivityType_Id(typeId)\n                .orElseThrow(() -> new ValidationException("No emission factor configured"));\n        \n        log.setUser(user);\n        log.setActivityType(type);\n        log.setEstimatedEmission(log.getQuantity() * factor.getFactorValue());\n        \n        return logRepository.save(log);\n    }\n\n    @Override\n    public List<ActivityLog> getLogsByUser(Long userId) {\n        return logRepository.findByUser_Id(userId);\n    }\n\n    @Override\n    public List<ActivityLog> getLogsByUserAndDate(Long userId, LocalDate start, LocalDate end) {\n        return logRepository.findByUser_IdAndActivityDateBetween(userId, start, end);\n    }\n\n    @Override\n    public ActivityLog getLog(Long id) {\n        return logRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException("Activity log not found"));\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/service/impl/ActivityTypeServiceImpl.java', 'package com.example.demo.service.impl;\n\nimport com.example.demo.entity.ActivityCategory;\nimport com.example.demo.entity.ActivityType;\nimport com.example.demo.exception.ResourceNotFoundException;\nimport com.example.demo.exception.ValidationException;\nimport com.example.demo.repository.ActivityCategoryRepository;\nimport com.example.demo.repository.ActivityTypeRepository;\nimport com.example.demo.service.ActivityTypeService;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class ActivityTypeServiceImpl implements ActivityTypeService {\n\n    private final ActivityTypeRepository typeRepository;\n    private final ActivityCategoryRepository categoryRepository;\n\n    public ActivityTypeServiceImpl(ActivityTypeRepository typeRepository, ActivityCategoryRepository categoryRepository) {\n        this.typeRepository = typeRepository;\n        this.categoryRepository = categoryRepository;\n    }\n\n    @Override\n    public ActivityType createType(Long categoryId, ActivityType type) {\n        ActivityCategory category = categoryRepository.findById(categoryId)\n                .orElseThrow(() -> new ResourceNotFoundException("Category not found"));\n        type.setCategory(category);\n        \n        if (type.getUnit() == null || type.getUnit().trim().isEmpty()) {\n            throw new ValidationException("Unit is required");\n        }\n        \n        return typeRepository.save(type);\n    }\n\n    @Override\n    public ActivityType getType(Long id) {\n        return typeRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException("Activity type not found"));\n    }\n\n    @Override\n    public List<ActivityType> getTypesByCategory(Long categoryId) {\n        return typeRepository.findByCategory_Id(categoryId);\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/service/impl/EmissionFactorServiceImpl.java', 'package com.example.demo.service.impl;\n\nimport com.example.demo.entity.ActivityType;\nimport com.example.demo.entity.EmissionFactor;\nimport com.example.demo.exception.ResourceNotFoundException;\nimport com.example.demo.exception.ValidationException;\nimport com.example.demo.repository.ActivityTypeRepository;\nimport com.example.demo.repository.EmissionFactorRepository;\nimport com.example.demo.service.EmissionFactorService;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class EmissionFactorServiceImpl implements EmissionFactorService {\n\n    private final EmissionFactorRepository factorRepository;\n    private final ActivityTypeRepository typeRepository;\n\n    public EmissionFactorServiceImpl(EmissionFactorRepository factorRepository, ActivityTypeRepository typeRepository) {\n        this.factorRepository = factorRepository;\n        this.typeRepository = typeRepository;\n    }\n\n    @Override\n    public EmissionFactor createFactor(Long activityTypeId, EmissionFactor factor) {\n        ActivityType type = typeRepository.findById(activityTypeId)\n                .orElseThrow(() -> new ResourceNotFoundException("Activity type not found")); // Or "Category not found" per spec ambiguity, but "Activity type not found" is clearer. Wait, spec says "Category not found" or appropriate message. Test t83 expects "Emission factor not found". I\'ll use logical messages.\n        \n        if (factor.getFactorValue() == null || factor.getFactorValue() <= 0) {\n            throw new ValidationException("Factor value must be greater than zero");\n        }\n        \n        factor.setActivityType(type);\n        return factorRepository.save(factor);\n    }\n\n    @Override\n    public EmissionFactor getFactor(Long id) {\n        return factorRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException("Emission factor not found"));\n    }\n\n    @Override\n    public EmissionFactor getFactorByType(Long typeId) {\n        return factorRepository.findByActivityType_Id(typeId)\n                .orElseThrow(() -> new ResourceNotFoundException("Emission factor not found"));\n    }\n\n    @Override\n    public List<EmissionFactor> getAllFactors() {\n        return factorRepository.findAll();\n    }\n}\n')
    create_file(r'src/main/java/com/example/demo/service/impl/UserServiceImpl.java', 'package com.example.demo.service.impl;\n\nimport com.example.demo.entity.User;\nimport com.example.demo.exception.ResourceNotFoundException;\nimport com.example.demo.exception.ValidationException;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.UserService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class UserServiceImpl implements UserService {\n\n    private final UserRepository userRepository;\n    private final PasswordEncoder passwordEncoder;\n\n    public UserServiceImpl(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n        this.userRepository = userRepository;\n        this.passwordEncoder = passwordEncoder;\n    }\n\n    // Auxiliary constructor for tests or when PasswordEncoder is not provided\n    public UserServiceImpl(UserRepository userRepository) {\n        this(userRepository, new BCryptPasswordEncoder());\n    }\n\n    @Override\n    public User registerUser(User user) {\n        if (userRepository.existsByEmail(user.getEmail())) {\n            throw new ValidationException("Email already in use");\n        }\n        if (user.getPassword() == null || user.getPassword().length() < 8) {\n            throw new ValidationException("Password must be at least 8 characters");\n        }\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        if (user.getRole() == null) {\n            user.setRole("USER");\n        }\n        return userRepository.save(user);\n    }\n\n    @Override\n    public User getUser(Long id) {\n        return userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException("User not found"));\n    }\n\n    @Override\n    public User getByEmail(String email) {\n        return userRepository.findByEmail(email)\n                .orElseThrow(() -> new ResourceNotFoundException("User not found"));\n    }\n\n    @Override\n    public List<User> getAllUsers() {\n        return userRepository.findAll();\n    }\n}\n')
    create_file(r'src/test/java/com/example/demo/CarbonFootprintEstimatorTest.java', 'package com.example.demo;\n\nimport com.example.demo.dto.ActivityLogRequest;\nimport com.example.demo.dto.LoginRequest;\nimport com.example.demo.dto.RegisterRequest;\nimport com.example.demo.entity.*;\nimport com.example.demo.exception.ResourceNotFoundException;\nimport com.example.demo.exception.ValidationException;\nimport com.example.demo.repository.*;\nimport com.example.demo.security.CustomUserDetailsService;\nimport com.example.demo.security.JwtUtil;\nimport com.example.demo.service.*;\nimport com.example.demo.service.impl.*;\nimport org.mockito.*;\nimport org.mockito.stubbing.Answer;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.testng.Assert;\nimport org.testng.annotations.*;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.*;\nimport java.util.Optional;\n\nimport static org.mockito.ArgumentMatchers.*;\nimport static org.mockito.Mockito.*;\n\n/**\n * Single TestNG class with 60 tests,\n * ordered according to:\n * 1. Simple Servlet / Controller-like behavior\n * 2. CRUD with Spring Boot\n * 3. DI & IoC\n * 4. Hibernate config & CRUD\n * 5. JPA mapping & normalization\n * 6. Many-to-many relationships (conceptually via associations)\n * 7. Security + JWT\n * 8. HQL / criteria-like advanced querying (simulated via repo methods)\n */\n@Listeners(TestResultListener.class)\npublic class CarbonFootprintEstimatorTest {\n\n    @Mock\n    private UserRepository userRepository;\n    @Mock\n    private ActivityCategoryRepository categoryRepository;\n    @Mock\n    private ActivityTypeRepository typeRepository;\n    @Mock\n    private ActivityLogRepository logRepository;\n    @Mock\n    private EmissionFactorRepository factorRepository;\n    @Mock\n    private AuthenticationManager authenticationManager;\n\n    @InjectMocks\n    private UserServiceImpl userService;\n    @InjectMocks\n    private ActivityCategoryServiceImpl categoryService;\n    @InjectMocks\n    private ActivityTypeServiceImpl typeService;\n    @InjectMocks\n    private ActivityLogServiceImpl logService;\n    @InjectMocks\n    private EmissionFactorServiceImpl factorService;\n\n    private JwtUtil jwtUtil;\n    private CustomUserDetailsService userDetailsService;\n\n    @BeforeClass\n    public void setup() {\n        MockitoAnnotations.openMocks(this);\n        jwtUtil = new JwtUtil();\n        userDetailsService = new CustomUserDetailsService(userRepository);\n    }\n\n    // region 1. "Servlet" style: simple controller behavior simulation (7 tests)\n\n    @Test(priority = 1, groups = "servlet")\n    public void t01_simpleController_returns200_likeServlet() {\n        String result = "OK";\n        Assert.assertEquals(result, "OK");\n    }\n\n    @Test(priority = 2, groups = "servlet")\n    public void t02_simpleControllerHandlesPathParameter() {\n        Long userId = 1L;\n        String url = "/api/users/" + userId;\n        Assert.assertTrue(url.contains("/api/users/1"));\n    }\n\n    @Test(priority = 3, groups = "servlet")\n    public void t03_simpleControllerHandlesQueryParam() {\n        String url = "/api/logs/user/1/range?start=2024-01-01&end=2024-01-31";\n        Assert.assertTrue(url.contains("start=2024-01-01"));\n        Assert.assertTrue(url.contains("end=2024-01-31"));\n    }\n\n    @Test(priority = 4, groups = "servlet")\n    public void t04_controllerLikeServletProcessesPostBody() {\n        RegisterRequest req = new RegisterRequest("Test User", "test@example.com", "password123");\n        Assert.assertEquals(req.getEmail(), "test@example.com");\n    }\n\n    @Test(priority = 5, groups = "servlet")\n    public void t05_simpleJsonMappingSimulation() {\n        ActivityLogRequest req = new ActivityLogRequest(10.0, LocalDate.now());\n        Assert.assertEquals(req.getQuantity(), 10.0);\n        Assert.assertNotNull(req.getActivityDate());\n    }\n\n    @Test(priority = 6, groups = "servlet")\n    public void t06_servletStylePathMatchingCheck() {\n        String path = "/api/factors/5";\n        Assert.assertTrue(path.matches(".*/api/factors/\\\\d+"));\n    }\n\n    @Test(priority = 7, groups = "servlet")\n    public void t07_servletStatusCodeConceptCheck() {\n        int statusOk = 200;\n        int statusUnauthorized = 401;\n        Assert.assertTrue(statusOk < statusUnauthorized);\n    }\n\n    // endregion\n\n    // region 2. CRUD operations using Spring Boot + REST (10 tests, priority 10-19)\n\n    @Test(priority = 10, groups = "crud")\n    public void t10_registerUser_success() {\n        User user = new User(null, "User A", "a@example.com", "password123", "USER", LocalDateTime.now());\n        when(userRepository.existsByEmail("a@example.com")).thenReturn(false);\n        when(userRepository.save(any(User.class))).thenAnswer((Answer<User>) invocation -> {\n            User u = invocation.getArgument(0);\n            u.setId(1L);\n            return u;\n        });\n\n        User created = userService.registerUser(user);\n\n        Assert.assertNotNull(created.getId());\n        Assert.assertEquals(created.getEmail(), "a@example.com");\n        verify(userRepository).save(any(User.class));\n    }\n\n    @Test(priority = 11, groups = "crud")\n    public void t11_registerUser_duplicateEmail() {\n        User user = new User(null, "User A", "a@example.com", "password123", "USER", LocalDateTime.now());\n        when(userRepository.existsByEmail("a@example.com")).thenReturn(true);\n\n        try {\n            userService.registerUser(user);\n            Assert.fail("Expected ValidationException for duplicate email");\n        } catch (ValidationException ex) {\n            Assert.assertTrue(ex.getMessage().contains("Email already in use"));\n        }\n    }\n\n    @Test(priority = 12, groups = "crud")\n    public void t12_getUserById_success() {\n        User user = new User(1L, "User A", "a@example.com", "encPass", "USER", LocalDateTime.now());\n        when(userRepository.findById(1L)).thenReturn(Optional.of(user));\n\n        User result = userService.getUser(1L);\n        Assert.assertEquals(result.getId(), 1L);\n    }\n\n    @Test(priority = 13, groups = "crud")\n    public void t13_getUserById_notFound() {\n        when(userRepository.findById(99L)).thenReturn(Optional.empty());\n        try {\n            userService.getUser(99L);\n            Assert.fail("Expected ResourceNotFoundException");\n        } catch (ResourceNotFoundException ex) {\n            Assert.assertTrue(ex.getMessage().contains("User not found"));\n        }\n    }\n\n    @Test(priority = 14, groups = "crud")\n    public void t14_createCategory_success() {\n        ActivityCategory category = new ActivityCategory(null, "Transport", "Transport desc", null);\n        when(categoryRepository.existsByCategoryName("Transport")).thenReturn(false);\n        when(categoryRepository.save(any(ActivityCategory.class))).thenAnswer(invocation -> {\n            ActivityCategory c = invocation.getArgument(0);\n            c.setId(10L);\n            return c;\n        });\n\n        ActivityCategory created = categoryService.createCategory(category);\n        Assert.assertNotNull(created.getId());\n        Assert.assertEquals(created.getCategoryName(), "Transport");\n    }\n\n    @Test(priority = 15, groups = "crud")\n    public void t15_createCategory_duplicateName() {\n        ActivityCategory category = new ActivityCategory(null, "Transport", "Transport desc", null);\n        when(categoryRepository.existsByCategoryName("Transport")).thenReturn(true);\n\n        try {\n            categoryService.createCategory(category);\n            Assert.fail("Expected ValidationException");\n        } catch (ValidationException ex) {\n            Assert.assertTrue(ex.getMessage().contains("Category name must be unique"));\n        }\n    }\n\n    @Test(priority = 16, groups = "crud")\n    public void t16_getAllCategories_emptyList() {\n        when(categoryRepository.findAll()).thenReturn(Collections.emptyList());\n        List<ActivityCategory> list = categoryService.getAllCategories();\n        Assert.assertTrue(list.isEmpty());\n    }\n\n    @Test(priority = 17, groups = "crud")\n    public void t17_getAllCategories_nonEmptyList() {\n        ActivityCategory cat1 = new ActivityCategory(1L, "Transport", null, LocalDateTime.now());\n        when(categoryRepository.findAll()).thenReturn(List.of(cat1));\n        List<ActivityCategory> list = categoryService.getAllCategories();\n        Assert.assertEquals(list.size(), 1);\n    }\n\n    @Test(priority = 18, groups = "crud")\n    public void t18_getCategoryById_found() {\n        ActivityCategory cat = new ActivityCategory(1L, "Transport", null, LocalDateTime.now());\n        when(categoryRepository.findById(1L)).thenReturn(Optional.of(cat));\n\n        ActivityCategory result = categoryService.getCategory(1L);\n        Assert.assertEquals(result.getId(), 1L);\n    }\n\n    @Test(priority = 19, groups = "crud")\n    public void t19_getCategoryById_notFound() {\n        when(categoryRepository.findById(100L)).thenReturn(Optional.empty());\n        try {\n            categoryService.getCategory(100L);\n            Assert.fail("Expected ResourceNotFoundException");\n        } catch (ResourceNotFoundException ex) {\n            Assert.assertTrue(ex.getMessage().contains("Category not found"));\n        }\n    }\n\n    // endregion\n\n    // region 3. DI & IoC (5 tests) priority 20-24\n\n    @Test(priority = 20, groups = "di")\n    public void t20_userServiceInjectedRepositoriesNotNull() {\n        Assert.assertNotNull(userService);\n        Assert.assertNotNull(userRepository);\n    }\n\n    @Test(priority = 21, groups = "di")\n    public void t21_categoryServiceInjectedRepositoryNotNull() {\n        Assert.assertNotNull(categoryService);\n        Assert.assertNotNull(categoryRepository);\n    }\n\n    @Test(priority = 22, groups = "di")\n    public void t22_activityTypeServiceInjectedDependencies() {\n        Assert.assertNotNull(typeService);\n        Assert.assertNotNull(categoryRepository);\n        Assert.assertNotNull(typeRepository);\n    }\n\n    @Test(priority = 23, groups = "di")\n    public void t23_logServiceInjectedMultipleRepositories() {\n        Assert.assertNotNull(logService);\n        Assert.assertNotNull(userRepository);\n        Assert.assertNotNull(typeRepository);\n        Assert.assertNotNull(factorRepository);\n    }\n\n    @Test(priority = 24, groups = "di")\n    public void t24_factorServiceInjectedDependencies() {\n        Assert.assertNotNull(factorService);\n        Assert.assertNotNull(typeRepository);\n        Assert.assertNotNull(factorRepository);\n    }\n\n    // endregion\n\n    // region 4. Hibernate configs, generator, annotations, CRUD (8 tests) priority 30-37\n\n    @Test(priority = 30, groups = "hibernate")\n    public void t30_entityUser_hasIdGenerated() {\n        User user = new User();\n        user.setId(10L);\n        Assert.assertEquals(user.getId(), 10L);\n    }\n\n    @Test(priority = 31, groups = "hibernate")\n    public void t31_entityActivityCategory_prePersistSetsCreatedAt() {\n        ActivityCategory cat = new ActivityCategory();\n        cat.setCategoryName("Energy");\n        cat.prePersist();\n        Assert.assertNotNull(cat.getCreatedAt());\n    }\n\n    @Test(priority = 32, groups = "hibernate")\n    public void t32_entityActivityType_prePersistSetsCreatedAt() {\n        ActivityType type = new ActivityType();\n        type.setTypeName("Car Travel");\n        type.setUnit("km");\n        type.prePersist();\n        Assert.assertNotNull(type.getCreatedAt());\n    }\n\n    @Test(priority = 33, groups = "hibernate")\n    public void t33_entityEmissionFactor_prePersistSetsCreatedAt() {\n        EmissionFactor ef = new EmissionFactor();\n        ef.setFactorValue(0.2);\n        ef.setUnit("km");\n        ef.prePersist();\n        Assert.assertNotNull(ef.getCreatedAt());\n    }\n\n    @Test(priority = 34, groups = "hibernate")\n    public void t34_entityActivityLog_prePersistSetsLoggedAt() {\n        ActivityLog log = new ActivityLog();\n        log.prePersist();\n        Assert.assertNotNull(log.getLoggedAt());\n    }\n\n    @Test(priority = 35, groups = "hibernate")\n    public void t35_crudSaveUser_viaRepositoryMock() {\n        User user = new User(null, "B", "b@example.com", "password123", "USER", null);\n        when(userRepository.save(any(User.class))).thenAnswer(invocation -> {\n            User u = invocation.getArgument(0);\n            u.setId(2L);\n            return u;\n        });\n        User saved = userRepository.save(user);\n        Assert.assertEquals(saved.getId(), 2L);\n    }\n\n    @Test(priority = 36, groups = "hibernate")\n    public void t36_repositoryFindByEmail_returnsOptional() {\n        User user = new User(3L, "C", "c@example.com", "pwd", "USER", LocalDateTime.now());\n        when(userRepository.findByEmail("c@example.com")).thenReturn(Optional.of(user));\n        Optional<User> opt = userRepository.findByEmail("c@example.com");\n        Assert.assertTrue(opt.isPresent());\n    }\n\n    @Test(priority = 37, groups = "hibernate")\n    public void t37_repositoryFindByEmail_empty() {\n        when(userRepository.findByEmail("none@example.com")).thenReturn(Optional.empty());\n        Optional<User> opt = userRepository.findByEmail("none@example.com");\n        Assert.assertTrue(opt.isEmpty());\n    }\n\n    // endregion\n\n    // region 5. JPA mapping & normalization (1NF, 2NF, 3NF) (5 tests) priority 40-44\n\n    @Test(priority = 40, groups = "jpa")\n    public void t40_activityTypeBelongsToCategory_1NF() {\n        ActivityCategory cat = new ActivityCategory(1L, "Transport", null, LocalDateTime.now());\n        ActivityType type = new ActivityType(5L, "Car Travel", cat, "km", LocalDateTime.now());\n        Assert.assertEquals(type.getCategory().getId(), 1L);\n    }\n\n    @Test(priority = 41, groups = "jpa")\n    public void t41_activityLogHasUserAndType_2NFConcept() {\n        User user = new User(1L, "User x", "x@example.com", "pwd", "USER", LocalDateTime.now());\n        ActivityType type = new ActivityType(2L, "Bus", null, "km", LocalDateTime.now());\n        ActivityLog log = new ActivityLog(1L, type, user, 10.0,\n                LocalDate.now(), LocalDateTime.now(), 20.0);\n        Assert.assertEquals(log.getUser().getId(), 1L);\n        Assert.assertEquals(log.getActivityType().getId(), 2L);\n    }\n\n    @Test(priority = 42, groups = "jpa")\n    public void t42_emissionFactorReferencesActivityType_3NFConcept() {\n        ActivityType type = new ActivityType(2L, "Car", null, "km", LocalDateTime.now());\n        EmissionFactor ef = new EmissionFactor(1L, type, 0.2, "km", LocalDateTime.now());\n        Assert.assertEquals(ef.getActivityType().getId(), 2L);\n    }\n\n    @Test(priority = 43, groups = "jpa")\n    public void t43_typesByCategoryRepositoryMethod() {\n        ActivityCategory cat = new ActivityCategory(1L, "Energy", null, LocalDateTime.now());\n        ActivityType t1 = new ActivityType(1L, "Electricity", cat, "kWh", LocalDateTime.now());\n        when(typeRepository.findByCategory_Id(1L)).thenReturn(List.of(t1));\n\n        List<ActivityType> list = typeRepository.findByCategory_Id(1L);\n        Assert.assertEquals(list.size(), 1);\n        Assert.assertEquals(list.get(0).getCategory().getCategoryName(), "Energy");\n    }\n\n    @Test(priority = 44, groups = "jpa")\n    public void t44_logsByUserAndDateRepositoryMethod() {\n        ActivityLog log1 = new ActivityLog(1L, null, null, 10.0,\n                LocalDate.of(2024, 1, 1), LocalDateTime.now(), 5.0);\n        when(logRepository.findByUser_IdAndActivityDateBetween(1L,\n                LocalDate.of(2024, 1, 1), LocalDate.of(2024, 1, 31)))\n                .thenReturn(List.of(log1));\n\n        List<ActivityLog> list = logRepository.findByUser_IdAndActivityDateBetween(1L,\n                LocalDate.of(2024, 1, 1), LocalDate.of(2024, 1, 31));\n        Assert.assertEquals(list.size(), 1);\n    }\n\n    // endregion\n\n    // region 6. Many-to-Many relationships & associations (simulated) (5 tests) priority 50-54\n\n    @Test(priority = 50, groups = "manyToMany")\n    public void t50_userMultipleLogs_association() {\n        User user = new User(1L, "MultiUser", "multi@example.com", "pwd", "USER", LocalDateTime.now());\n        ActivityLog log1 = new ActivityLog(1L, null, user, 5.0, LocalDate.now(), LocalDateTime.now(), 2.0);\n        ActivityLog log2 = new ActivityLog(2L, null, user, 10.0, LocalDate.now(), LocalDateTime.now(), 4.0);\n\n        List<ActivityLog> logs = List.of(log1, log2);\n        Assert.assertEquals(logs.size(), 2);\n        Assert.assertTrue(logs.stream().allMatch(l -> l.getUser().getId().equals(1L)));\n    }\n\n    @Test(priority = 51, groups = "manyToMany")\n    public void t51_typeUsedInMultipleLogs_association() {\n        ActivityType type = new ActivityType(1L, "SharedType", null, "km", LocalDateTime.now());\n        ActivityLog log1 = new ActivityLog(1L, type, null, 5.0, LocalDate.now(), LocalDateTime.now(), 1.0);\n        ActivityLog log2 = new ActivityLog(2L, type, null, 10.0, LocalDate.now(), LocalDateTime.now(), 2.0);\n\n        Assert.assertEquals(log1.getActivityType().getId(), log2.getActivityType().getId());\n    }\n\n    @Test(priority = 52, groups = "manyToMany")\n    public void t52_userTypesManyRelationConceptual() {\n        User user = new User(1L, "U", "u@example.com", "pwd", "USER", LocalDateTime.now());\n        ActivityType type1 = new ActivityType(1L, "Car", null, "km", LocalDateTime.now());\n        ActivityType type2 = new ActivityType(2L, "Bus", null, "km", LocalDateTime.now());\n\n        ActivityLog log1 = new ActivityLog(1L, type1, user, 11.0, LocalDate.now(), LocalDateTime.now(), 2.0);\n        ActivityLog log2 = new ActivityLog(2L, type2, user, 12.0, LocalDate.now(), LocalDateTime.now(), 3.0);\n\n        Set<ActivityType> types = new HashSet<>();\n        types.add(log1.getActivityType());\n        types.add(log2.getActivityType());\n        Assert.assertEquals(types.size(), 2);\n    }\n\n    @Test(priority = 53, groups = "manyToMany")\n    public void t53_sameTypeDifferentUsers_association() {\n        ActivityType type = new ActivityType(1L, "Car", null, "km", LocalDateTime.now());\n        User u1 = new User(1L, "U1", "u1@example.com", "pwd", "USER", LocalDateTime.now());\n        User u2 = new User(2L, "U2", "u2@example.com", "pwd", "USER", LocalDateTime.now());\n\n        ActivityLog l1 = new ActivityLog(1L, type, u1, 1.0, LocalDate.now(), LocalDateTime.now(), 0.2);\n        ActivityLog l2 = new ActivityLog(2L, type, u2, 2.0, LocalDate.now(), LocalDateTime.now(), 0.4);\n\n        Assert.assertNotEquals(l1.getUser().getId(), l2.getUser().getId());\n        Assert.assertEquals(l1.getActivityType().getId(), l2.getActivityType().getId());\n    }\n\n    @Test(priority = 54, groups = "manyToMany")\n    public void t54_manyToManyConceptTotalUsersForType() {\n        ActivityType type = new ActivityType(1L, "Car", null, "km", LocalDateTime.now());\n        User u1 = new User(1L, "U1", "u1@example.com", "pwd", "USER", LocalDateTime.now());\n        User u2 = new User(2L, "U2", "u2@example.com", "pwd", "USER", LocalDateTime.now());\n\n        ActivityLog l1 = new ActivityLog(1L, type, u1, 1.0, LocalDate.now(), LocalDateTime.now(), 0.2);\n        ActivityLog l2 = new ActivityLog(2L, type, u2, 2.0, LocalDate.now(), LocalDateTime.now(), 0.4);\n\n        Set<Long> userIds = new HashSet<>();\n        userIds.add(l1.getUser().getId());\n        userIds.add(l2.getUser().getId());\n\n        Assert.assertEquals(userIds.size(), 2);\n    }\n\n    // endregion\n\n    // region 7. Security & JWT token-based auth (14 tests) priority 60-73\n\n    @Test(priority = 60, groups = "security")\n    public void t60_generateJwtToken_containsSubject() {\n        Map<String, Object> claims = Map.of("key", "value");\n        String token = jwtUtil.generateToken(claims, "subject@example.com");\n        String username = jwtUtil.extractUsername(token);\n        Assert.assertEquals(username, "subject@example.com");\n    }\n\n    @Test(priority = 61, groups = "security")\n    public void t61_generateTokenForUser_containsUserIdEmailRole() {\n        User user = new User(10L, "T", "token@example.com", "pwd", "ADMIN", LocalDateTime.now());\n        String token = jwtUtil.generateTokenForUser(user);\n\n        String username = jwtUtil.extractUsername(token);\n        String role = jwtUtil.extractRole(token);\n        Long userId = jwtUtil.extractUserId(token);\n\n        Assert.assertEquals(username, "token@example.com");\n        Assert.assertEquals(role, "ADMIN");\n        Assert.assertEquals(userId, Long.valueOf(10L));\n    }\n\n    @Test(priority = 62, groups = "security")\n    public void t62_tokenValidation_success() {\n        User user = new User(11L, "U", "u@example.com", "pwd", "USER", LocalDateTime.now());\n        String token = jwtUtil.generateTokenForUser(user);\n        boolean valid = jwtUtil.isTokenValid(token, "u@example.com");\n        Assert.assertTrue(valid);\n    }\n\n    @Test(priority = 63, groups = "security")\n    public void t63_tokenValidation_wrongUser() {\n        User user = new User(11L, "U", "u@example.com", "pwd", "USER", LocalDateTime.now());\n        String token = jwtUtil.generateTokenForUser(user);\n        boolean valid = jwtUtil.isTokenValid(token, "v@example.com");\n        Assert.assertFalse(valid);\n    }\n\n    @Test(priority = 64, groups = "security")\n    public void t64_customUserDetailsService_loadByEmail_success() {\n        User user = new User(5L, "User", "user@example.com", "pwd", "ADMIN", LocalDateTime.now());\n        when(userRepository.findByEmail("user@example.com")).thenReturn(Optional.of(user));\n\n        UserDetails details = userDetailsService.loadUserByUsername("user@example.com");\n        Assert.assertEquals(details.getUsername(), "user@example.com");\n        Assert.assertTrue(details.getAuthorities().stream()\n                .anyMatch(a -> a.getAuthority().equals("ROLE_ADMIN")));\n    }\n\n    @Test(priority = 65, groups = "security")\n    public void t65_customUserDetailsService_userNotFound() {\n        when(userRepository.findByEmail("no@example.com")).thenReturn(Optional.empty());\n        try {\n            userDetailsService.loadUserByUsername("no@example.com");\n            Assert.fail("Expected UsernameNotFoundException");\n        } catch (Exception ex) {\n            Assert.assertTrue(ex.getMessage().contains("User not found"));\n        }\n    }\n\n    @Test(priority = 66, groups = "security")\n    public void t66_authenticationManager_simulation_success() {\n        LoginRequest request = new LoginRequest("auth@example.com", "password123");\n        UsernamePasswordAuthenticationToken token =\n                new UsernamePasswordAuthenticationToken(request.getEmail(), request.getPassword());\n        when(authenticationManager.authenticate(any(UsernamePasswordAuthenticationToken.class)))\n                .thenReturn(token);\n\n        Assert.assertEquals(token.getPrincipal(), request.getEmail());\n        verify(authenticationManager, never()).authenticate(null);\n    }\n\n    @Test(priority = 67, groups = "security")\n    public void t67_roleBasedAccessConcept_adminCanManageCategories() {\n        User admin = new User(1L, "Admin", "admin@example.com", "pwd", "ADMIN", LocalDateTime.now());\n        Assert.assertEquals(admin.getRole(), "ADMIN");\n    }\n\n    @Test(priority = 68, groups = "security")\n    public void t68_roleBasedAccessConcept_userCannotBeAdmin() {\n        User normal = new User(2L, "User", "user@example.com", "pwd", "USER", LocalDateTime.now());\n        Assert.assertNotEquals(normal.getRole(), "ADMIN");\n    }\n\n    @Test(priority = 69, groups = "security")\n    public void t69_tokenIncludesEmailClaim() {\n        User user = new User(15L, "E", "emailclaim@example.com", "pwd", "USER", LocalDateTime.now());\n        String token = jwtUtil.generateTokenForUser(user);\n        String email = (String) jwtUtil.parseToken(token).getPayload().get("email");\n        Assert.assertEquals(email, "emailclaim@example.com");\n    }\n\n    @Test(priority = 70, groups = "security")\n    public void t70_tokenIncludesRoleClaim() {\n        User user = new User(16L, "R", "roleclaim@example.com", "pwd", "ADMIN", LocalDateTime.now());\n        String token = jwtUtil.generateTokenForUser(user);\n        String role = (String) jwtUtil.parseToken(token).getPayload().get("role");\n        Assert.assertEquals(role, "ADMIN");\n    }\n\n    @Test(priority = 71, groups = "security")\n    public void t71_tokenIncludesUserIdClaim() {\n        User user = new User(17L, "I", "idclaim@example.com", "pwd", "USER", LocalDateTime.now());\n        String token = jwtUtil.generateTokenForUser(user);\n        Object id = jwtUtil.parseToken(token).getPayload().get("userId");\n        Assert.assertNotNull(id);\n    }\n\n    @Test(priority = 72, groups = "security")\n    public void t72_invalidTokenParsingThrows() {\n        String invalidToken = "invalid.token.string";\n        try {\n            jwtUtil.parseToken(invalidToken);\n            Assert.fail("Expected exception for invalid token");\n        } catch (Exception ex) {\n            Assert.assertTrue(ex.getMessage() != null);\n        }\n    }\n\n    @Test(priority = 73, groups = "security")\n    public void t73_passwordMinLengthValidation() {\n        User user = new User(null, "ShortPwd", "shortpwd@example.com", "short", "USER", LocalDateTime.now());\n        when(userRepository.existsByEmail("shortpwd@example.com")).thenReturn(false);\n\n        try {\n            userService.registerUser(user);\n            Assert.fail("Expected ValidationException due to password length");\n        } catch (ValidationException ex) {\n            Assert.assertTrue(ex.getMessage().contains("Password must be at least 8 characters"));\n        }\n    }\n\n    // endregion\n\n    // region 8. Advanced querying (HQL / criteria-like) (7 tests) priority 80-86\n\n    @Test(priority = 80, groups = "hql")\n    public void t80_getLogsByUserAndDate_service() {\n        ActivityLog log1 = new ActivityLog(1L, null, null, 5.0,\n                LocalDate.of(2024, 1, 1), LocalDateTime.now(), 1.0);\n        when(logRepository.findByUser_IdAndActivityDateBetween(1L,\n                LocalDate.of(2024, 1, 1), LocalDate.of(2024, 1, 31)))\n                .thenReturn(List.of(log1));\n\n        List<ActivityLog> list = logService.getLogsByUserAndDate(1L,\n                LocalDate.of(2024, 1, 1), LocalDate.of(2024, 1, 31));\n        Assert.assertEquals(list.size(), 1);\n    }\n\n    @Test(priority = 81, groups = "hql")\n    public void t81_getLogsByUser_service() {\n        ActivityLog log1 = new ActivityLog(1L, null, null, 5.0,\n                LocalDate.of(2024, 1, 1), LocalDateTime.now(), 1.0);\n        ActivityLog log2 = new ActivityLog(2L, null, null, 10.0,\n                LocalDate.of(2024, 1, 2), LocalDateTime.now(), 2.0);\n        when(logRepository.findByUser_Id(1L)).thenReturn(List.of(log1, log2));\n\n        List<ActivityLog> list = logService.getLogsByUser(1L);\n        Assert.assertEquals(list.size(), 2);\n    }\n\n    @Test(priority = 82, groups = "hql")\n    public void t82_getFactorByType_found() {\n        ActivityType type = new ActivityType(1L, "Car", null, "km", LocalDateTime.now());\n        EmissionFactor ef = new EmissionFactor(10L, type, 0.2, "km", LocalDateTime.now());\n        when(factorRepository.findByActivityType_Id(1L)).thenReturn(Optional.of(ef));\n\n        EmissionFactor result = factorService.getFactorByType(1L);\n        Assert.assertEquals(result.getId(), 10L);\n    }\n\n    @Test(priority = 83, groups = "hql")\n    public void t83_getFactorByType_notFound() {\n        when(factorRepository.findByActivityType_Id(99L)).thenReturn(Optional.empty());\n        try {\n            factorService.getFactorByType(99L);\n            Assert.fail("Expected ResourceNotFoundException");\n        } catch (ResourceNotFoundException ex) {\n            Assert.assertTrue(ex.getMessage().contains("Emission factor not found"));\n        }\n    }\n\n    @Test(priority = 84, groups = "hql")\n    public void t84_logActivity_calculatesEmissionCorrectly() {\n        User u = new User(1L, "User", "u@example.com", "pwd", "USER", LocalDateTime.now());\n        ActivityType type = new ActivityType(2L, "Car", null, "km", LocalDateTime.now());\n        EmissionFactor ef = new EmissionFactor(5L, type, 0.5, "km", LocalDateTime.now());\n\n        when(userRepository.findById(1L)).thenReturn(Optional.of(u));\n        when(typeRepository.findById(2L)).thenReturn(Optional.of(type));\n        when(factorRepository.findByActivityType_Id(2L)).thenReturn(Optional.of(ef));\n        when(logRepository.save(any(ActivityLog.class))).thenAnswer(invocation -> invocation.getArgument(0));\n\n        ActivityLog log = new ActivityLog();\n        log.setQuantity(10.0);\n        log.setActivityDate(LocalDate.now());\n\n        ActivityLog created = logService.logActivity(1L, 2L, log);\n        Assert.assertEquals(created.getEstimatedEmission(), Double.valueOf(5.0));\n    }\n\n    @Test(priority = 85, groups = "hql")\n    public void t85_logActivity_futureDateValidation() {\n        User u = new User(1L, "User", "u@example.com", "pwd", "USER", LocalDateTime.now());\n        when(userRepository.findById(1L)).thenReturn(Optional.of(u));\n\n        ActivityLog log = new ActivityLog();\n        log.setQuantity(1.0);\n        log.setActivityDate(LocalDate.now().plusDays(1));\n\n        try {\n            logService.logActivity(1L, 2L, log);\n            Assert.fail("Expected ValidationException for future date");\n        } catch (ValidationException ex) {\n            Assert.assertTrue(ex.getMessage().contains("cannot be in the future"));\n        }\n    }\n\n    @Test(priority = 86, groups = "hql")\n    public void t86_logActivity_requiresFactor() {\n        User u = new User(1L, "User", "u@example.com", "pwd", "USER", LocalDateTime.now());\n        ActivityType type = new ActivityType(2L, "Car", null, "km", LocalDateTime.now());\n\n        when(userRepository.findById(1L)).thenReturn(Optional.of(u));\n        when(typeRepository.findById(2L)).thenReturn(Optional.of(type));\n        when(factorRepository.findByActivityType_Id(2L)).thenReturn(Optional.empty());\n\n        ActivityLog log = new ActivityLog();\n        log.setQuantity(1.0);\n        log.setActivityDate(LocalDate.now());\n\n        try {\n            logService.logActivity(1L, 2L, log);\n            Assert.fail("Expected ValidationException for missing factor");\n        } catch (ValidationException ex) {\n            Assert.assertTrue(ex.getMessage().contains("No emission factor configured"));\n        }\n    }\n\n    // endregion\n}\n')
    create_file(r'src/test/java/com/example/demo/TestResultListener.java', 'package com.example.demo;\n \nimport org.testng.ITestListener;\nimport org.testng.ITestResult;\n \npublic class TestResultListener implements ITestListener {\n \n    @Override\n    public void onTestSuccess(ITestResult result) {\n        System.out.println(result.getMethod().getMethodName() + " - PASS");\n    }\n \n    @Override\n    public void onTestFailure(ITestResult result) {\n        System.out.println(result.getMethod().getMethodName() + " - FAIL");\n    }\n \n    @Override\n    public void onTestSkipped(ITestResult result) {\n        System.out.println(result.getMethod().getMethodName() + " - SKIP");\n    }\n}')

if __name__ == '__main__':
    main()
